<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">
  <process id="easy_dayoff" name="请假" isExecutable="true" flowable:initiator="${INITIATOR}">
    <documentation>请假流程</documentation>
    <startEvent id="startEvent1"></startEvent>
    <userTask id="AO" name="考勤专员" flowable:candidateGroups="AO"></userTask>
    <endEvent id="sid-FAB311F1-6183-4C4E-8291-97A364EEB8BB"></endEvent>
    <userTask id="SUP" name="主管" flowable:assignee="${assign}">
      <extensionElements>
        <flowable:taskListener event="complete" delegateExpression="${counterSignCompleteListener}">
          <flowable:field name="approveParamName">
            <flowable:string><![CDATA[supApprove]]></flowable:string>
          </flowable:field>
        </flowable:taskListener>
        <modeler:initiator-can-complete xmlns:modeler="http://flowable.org/modeler"><![CDATA[false]]></modeler:initiator-can-complete>
      </extensionElements>
      <multiInstanceLoopCharacteristics isSequential="false" flowable:collection="assignList" flowable:elementVariable="assign">
        <completionCondition><![CDATA[${nrOfCompletedInstances/nrOfInstances >= 1 }]]></completionCondition>
      </multiInstanceLoopCharacteristics>
    </userTask>
    <userTask id="HRM" name="人事经理" flowable:candidateGroups="HRM"></userTask>
    <exclusiveGateway id="sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA"></exclusiveGateway>
    <userTask id="GM" name="总经理" flowable:candidateGroups="GM"></userTask>
    <sequenceFlow id="less_than_2_days" name="同意 且 小于等于 2 天" sourceRef="sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA" targetRef="sid-FAB311F1-6183-4C4E-8291-97A364EEB8BB">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${hrmApprove && day<=2}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="more_than_2_days" name="同意 且 大于 2天" sourceRef="sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA" targetRef="GM">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${hrmApprove && day>2}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-FA2D7FDF-DC6E-43A9-8138-CA3B3A6D1224" name="同意" sourceRef="GM" targetRef="sid-FAB311F1-6183-4C4E-8291-97A364EEB8BB">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${gmApprove}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-F6703993-FB7E-482A-9845-C1C88EBC4975" name="同意" sourceRef="AO" targetRef="SUP">
      <extensionElements>
        <flowable:executionListener event="take" delegateExpression="${initCounterSignListener}"></flowable:executionListener>
      </extensionElements>
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${aoApprove}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-4F498511-F427-4415-9821-031D682A4BC0" name="同意" sourceRef="SUP" targetRef="HRM">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${allPass}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-F671ED57-E371-4022-97AF-70E1D75F8153" sourceRef="HRM" targetRef="sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA"></sequenceFlow>
    <userTask id="submit" name="提交信息" flowable:assignee="${INITIATOR}">
      <extensionElements>
        <modeler:activiti-idm-initiator xmlns:modeler="http://flowable.org/modeler"><![CDATA[true]]></modeler:activiti-idm-initiator>
      </extensionElements>
    </userTask>
    <sequenceFlow id="sid-336C3244-48C2-4D7F-8297-152900ED5815" sourceRef="startEvent1" targetRef="submit"></sequenceFlow>
    <sequenceFlow id="sid-BABD204B-DD31-4ECF-B75A-D8ECA30BAF80" sourceRef="submit" targetRef="AO"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_easy_dayoff">
    <bpmndi:BPMNPlane bpmnElement="easy_dayoff" id="BPMNPlane_easy_dayoff">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="60.0" y="118.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="AO" id="BPMNShape_AO">
        <omgdc:Bounds height="80.0" width="100.0" x="330.0" y="93.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-FAB311F1-6183-4C4E-8291-97A364EEB8BB" id="BPMNShape_sid-FAB311F1-6183-4C4E-8291-97A364EEB8BB">
        <omgdc:Bounds height="28.0" width="28.0" x="780.0" y="408.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="SUP" id="BPMNShape_SUP">
        <omgdc:Bounds height="80.0" width="100.0" x="495.0" y="93.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="HRM" id="BPMNShape_HRM">
        <omgdc:Bounds height="80.0" width="100.0" x="675.0" y="93.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA" id="BPMNShape_sid-61E21700-B0C2-40D3-8106-826EAE9C7DAA">
        <omgdc:Bounds height="40.0" width="40.0" x="705.0" y="213.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="GM" id="BPMNShape_GM">
        <omgdc:Bounds height="80.0" width="100.0" x="840.0" y="193.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="submit" id="BPMNShape_submit">
        <omgdc:Bounds height="80.0" width="100.0" x="165.0" y="93.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-BABD204B-DD31-4ECF-B75A-D8ECA30BAF80" id="BPMNEdge_sid-BABD204B-DD31-4ECF-B75A-D8ECA30BAF80">
        <omgdi:waypoint x="264.95000000000005" y="133.5"></omgdi:waypoint>
        <omgdi:waypoint x="330.0" y="133.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F671ED57-E371-4022-97AF-70E1D75F8153" id="BPMNEdge_sid-F671ED57-E371-4022-97AF-70E1D75F8153">
        <omgdi:waypoint x="725.0" y="173.45"></omgdi:waypoint>
        <omgdi:waypoint x="725.0" y="213.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-4F498511-F427-4415-9821-031D682A4BC0" id="BPMNEdge_sid-4F498511-F427-4415-9821-031D682A4BC0">
        <omgdi:waypoint x="594.9499999999571" y="133.5"></omgdi:waypoint>
        <omgdi:waypoint x="674.999999999995" y="133.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="less_than_2_days" id="BPMNEdge_less_than_2_days">
        <omgdi:waypoint x="725.0" y="253.44472501322056"></omgdi:waypoint>
        <omgdi:waypoint x="725.0" y="422.5"></omgdi:waypoint>
        <omgdi:waypoint x="780.0" y="422.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="more_than_2_days" id="BPMNEdge_more_than_2_days">
        <omgdi:waypoint x="744.9439582071294" y="233.5"></omgdi:waypoint>
        <omgdi:waypoint x="840.0" y="233.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FA2D7FDF-DC6E-43A9-8138-CA3B3A6D1224" id="BPMNEdge_sid-FA2D7FDF-DC6E-43A9-8138-CA3B3A6D1224">
        <omgdi:waypoint x="890.0" y="273.45000000000005"></omgdi:waypoint>
        <omgdi:waypoint x="890.0" y="422.5"></omgdi:waypoint>
        <omgdi:waypoint x="807.949934373281" y="422.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-336C3244-48C2-4D7F-8297-152900ED5815" id="BPMNEdge_sid-336C3244-48C2-4D7F-8297-152900ED5815">
        <omgdi:waypoint x="89.94999906759469" y="133.5"></omgdi:waypoint>
        <omgdi:waypoint x="165.0" y="133.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F6703993-FB7E-482A-9845-C1C88EBC4975" id="BPMNEdge_sid-F6703993-FB7E-482A-9845-C1C88EBC4975">
        <omgdi:waypoint x="429.95000000000005" y="133.5"></omgdi:waypoint>
        <omgdi:waypoint x="494.99999999998965" y="133.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>